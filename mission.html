<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>PROJET X.28</title>

<link rel="apple-touch-icon" href="iconeenigmes.png?v=4">
<link rel="icon" type="image/jpeg" href="iconeenigmes.png?v=4">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Projet X.28">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --accent: #6a11cb; 
            --pink: #ff7eb9; 
            --bg: #0f0c29;
            --glass: rgba(255, 255, 255, 0.07);
        }

        body { 
            font-family: 'Poppins', sans-serif; 
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            background-attachment: fixed;
            margin: 0; color: white; min-height: 100vh; padding-bottom: 80px;
        }

        /* --- HEADER --- */
        .mission-header {
            padding: 60px 20px 30px 20px;
            text-align: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.3), transparent);
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .mission-badge {
            display: inline-block; padding: 5px 15px; border: 1px solid var(--pink);
            border-radius: 5px; font-family: 'Fira Code', monospace; font-size: 0.7rem;
            color: var(--pink); text-transform: uppercase; margin-bottom: 15px; letter-spacing: 2px;
        }

        .mission-header h1 {
            font-size: 2.5rem; 
            font-weight: 700; 
            margin: 0; 
            letter-spacing: -1px;
            background: linear-gradient(to right, #fff, #ccc);
            -webkit-background-clip: text; /* Pour Chrome/Safari */
            background-clip: text;         /* La version standard que VS Code r√©clame */
            -webkit-text-fill-color: transparent;
        }

        .mission-sub {
            font-family: 'Fira Code', monospace; font-size: 0.8rem; color: #888;
            letter-spacing: 4px; margin-top: 5px; text-transform: uppercase;
        }

        /* --- BARRE DE PROGRESSION --- */
        .progress-wrapper { max-width: 280px; margin: 25px auto 0 auto; }
        .progress-info { display: flex; justify-content: space-between; font-family: 'Fira Code', monospace; font-size: 0.6rem; margin-bottom: 8px; color: var(--pink); }

        .status-container { background: rgba(255,255,255,0.1); height: 6px; border-radius: 10px; overflow: hidden; }
        .status-bar { width: 0%; height: 100%; background: linear-gradient(to right, var(--accent), var(--pink)); box-shadow: 0 0 15px var(--pink); transition: width 0.8s ease; }

        /* --- PROTOCOLE --- */
        .protocol-box {
            background: var(--glass); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 24px; padding: 30px; margin: 30px auto; max-width: 480px;
            backdrop-filter: blur(10px); text-align: left;
        }
        .protocol-box h3 { color: white; margin: 0 0 20px 0; font-size: 1.1rem; font-weight: 700; display: flex; align-items: center; }
        .protocol-box h3::before { content: ''; width: 4px; height: 20px; background: var(--pink); margin-right: 12px; border-radius: 2px; }
        .protocol-list { padding: 0; list-style: none; font-size: 0.85rem; line-height: 1.8; color: #d1d1d1; }
        .protocol-list li { margin-bottom: 12px; }

        /* --- CARTES D'INDICES --- */
        .container { max-width: 500px; margin: 0 auto; padding: 0 20px; text-align: center;}
        
        .hint-card {
            background: rgba(255, 255, 255, 0.95); border-radius: 24px; padding: 22px; 
            margin-bottom: 25px; display: flex; align-items: center; color: #333;
            transition: 0.4s ease; opacity: 0; transform: translateY(20px); text-align: left;
        }
        .is-ready { opacity: 1; transform: translateY(0); }

        .date-badge {
            min-width: 65px; height: 65px; background: linear-gradient(135deg, var(--accent), var(--pink));
            color: white; border-radius: 18px; display: flex; flex-direction: column;
            align-items: center; justify-content: center; margin-right: 20px;
        }
        .date-badge strong { font-size: 1.4rem; line-height: 1; }
        .date-badge span { font-size: 0.7rem; text-transform: uppercase; }

        .is-blur { filter: blur(5px); cursor: pointer; user-select: none; transition: filter 1.2s ease; opacity: 0.7; }
        .hint-text { font-size: 0.9rem; line-height: 1.4; width: 100%; font-weight: 500; }

        .countdown-label { display: block; font-size: 0.6rem; text-transform: uppercase; letter-spacing: 1px; color: #888; margin-bottom: 2px; font-weight: bold;}
        .countdown-small { font-family: 'Fira Code', monospace; font-size: 0.75rem; color: var(--accent); font-weight: bold; }

        /* --- POP-UP --- */
        #mission-popup {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(10, 10, 20, 0.95); backdrop-filter: blur(15px);
            display: none; align-items: center; justify-content: center; z-index: 9999;
        }
        .popup-content {
            background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 40px; border-radius: 35px; width: 85%; max-width: 400px; text-align: center;
        }
        .popup-btn {
            background: white; color: black; border: none; padding: 18px 35px; border-radius: 50px;
            font-weight: 700; margin-top: 25px; cursor: pointer; width: 100%; text-transform: uppercase;
        }

        /* --- PANNEAU ADMIN --- */
        #admin-panel { 
            position: fixed; bottom: 20px; right: 20px; background: white; padding: 15px; 
            border-radius: 20px; display: none; z-index: 10000; color: #333; width: 220px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .admin-btn { width: 100%; padding: 10px; margin-top: 8px; border: none; border-radius: 8px; cursor: pointer; font-size: 0.75rem; font-weight: bold; }
        
    </style>
    
</head>
<body>

<audio id="unlock-sound" src="https://assets.mixkit.co/active_storage/sfx/2358/2358-preview.mp3"></audio>

<div id="mission-popup">
    <div class="popup-content">
        <div style="font-size: 3rem; margin-bottom: 15px;">‚è≥</div>
        <div style="font-weight: 700; color: white; margin-bottom: 10px; text-transform: uppercase;">Alerte Mission</div>
        <p style="font-size: 0.9rem; color: #ccc;">Un nouveau fragment vient de se d√©bloquer.</p>
        <button class="popup-btn" onclick="closePopup()">D√©couvrir</button>
    </div>
</div>

<header class="mission-header">
    <div class="mission-badge">Ton cadeau commence ici ü§´</div>
    <h1>IL N‚ÄôY A PAS DE RETOUR EN ARRI√àRE</h1>
    <div class="mission-sub">NALYA-2026</div>
    
    <div class="progress-wrapper">
        <div class="progress-info">
            <span id="departure-timer">Calcul...</span>
            <span id="status-percent">0%</span>
        </div>
        <div class="status-container">
            <div class="status-bar" id="status-bar"></div>
        </div>
    </div>
</header>

<div class="container">
    <div class="protocol-box">
        <h3>üìã NOTE DE MISSION √Ä LIRE ATTENTIVEMENT :</h3>
        <ul class="protocol-list">
            <li><b>Nalya</b>, ce lien est ton seul guide. Voici les r√®gles de l'op√©ration :</li>
            <li>‚Ä¢ <b>Bloque ta journ√©e :</b> Le <b>28 JUILLET</b> t'appartient enti√®rement. Ne pr√©vois rien d'autre, de l'aube jusqu'au cr√©puscule.</li>
            <li>‚Ä¢ <b>Un jour, un fragment :</b> √Ä minuit pile, une nouvelle case s'active. Clique sur le flou pour voir l'indice.</li>
            <li>‚Ä¢ <b>Le Dress Code :</b> Pr√©pare une tenue o√π tu te trouves <b>magnifique</b> (il y aura des photos !), mais attention : tes chaussures doivent √™tre tes meilleures alli√©es. Le confort est l'unique cl√© de cette journ√©e.</li>
            <li>‚Ä¢ <b>Le Secret :</b> N'essaie pas de deviner. M√™me le matin du d√©part, le myst√®re restera entier. Laisse-toi simplement porter.</li>
            <li style="margin-top: 20px; color: var(--pink); font-size: 0.8rem; text-align: center;"><b>CONSEIL :</b> Ajoute cette page √† tes raccourcis pour ne rien manquer.</li>
        </ul>
    </div>

    <div id="puzzles-list"></div>
</div>

<div id="secret-trigger" style="text-align:center; padding:40px; opacity:0.01; cursor: pointer; user-select: none;">
    Acc√®s restreint
</div>

<div id="admin-panel">
    <div onclick="this.parentElement.style.display='none'" style="cursor:pointer; text-align:right; font-weight:bold;">‚úï</div>
    <p style="font-size: 0.7rem; margin-bottom: 5px;">Simulateur Temporel</p>
    <input type="date" id="test-date" style="width:100%; padding: 5px; box-sizing: border-box;">
    <button class="admin-btn" style="background:var(--accent); color:white;" onclick="setTestDate()">Voyager</button>
    <button class="admin-btn" onclick="localStorage.clear(); location.reload();">Reset Progression</button>
</div>

<script>
   const MES_ENIGMES = [
        { date: "2026-07-18", texte: "<b>UNIT√â NALYA-28 : PROTOCOLE ANNIVERSAIRE</b><br>Syst√®me en veille pour les prochaines 24 heures. Aucune donn√©e ne sera intercept√©e ce soir. Profite de l'instant pr√©sent. Fin de transmission." },
        { date: "2026-07-19", texte: "<b>COORDONN√âES ALPHA :</b> La cible se situe l√† o√π la pierre est rouge et o√π le sang royal a coul√© pour donner naissance √† une dynastie. Ce n'est pas une capitale, mais elle r√®gne sur le temps une fois par an." },
        { date: "2026-07-20", texte: "<b>ANALYSE TECHNIQUE :</b> 300 km/h. C'est la barri√®re que les pionniers ont bris√©e sur une ligne droite qui porte le nom d'un petit village de la Sarthe. Trouve le nom de cette ligne, et tu trouveras ton premier point de chute." },
        { date: "2026-07-21", texte: "<b>CRYPTAGE G√âOGRAPHIQUE :</b> Dunlop, Tertre Rouge, Mulsanne, Arnage. Si ces noms ne sont pour toi que des mots, alors tu es encore loin du but. Si tu les relies, le trac√© appara√Ætra." },
        { date: "2026-07-22", texte: "<b>ARCHIVES 1906 :</b> C'est ici que le tout premier Grand Prix de l'histoire a eu lieu. Pas √† Monaco, pas √† Monza. Ici. Le sol garde encore la trace de l'huile et de la l√©gende." },
        { date: "2026-07-23", texte: "<b>V√âRIFICATION SENSORIELLE :</b> On y vient pour l'endurance, on y reste pour l'ambiance. Ton si√®ge t'attend, mais tu ne seras pas aux commandes. Pr√©pare-toi √† subir la physique plut√¥t qu'√† la diriger." },
        { date: "2026-07-24", texte: "<b>STATUT : IDENTIFICATION PROBABLE.</b><br>La ville est identifi√©e. Mais ne te r√©jouis pas trop vite. La destination n'est jamais la finalit√© du Projet X.28. C'est un √©cran de fum√©e." },
        { date: "2026-07-25", texte: "<b>CONSIGNES OP√âRATIONNELLES - 26 JUILLET :</b><br>‚Ä¢ Point de ralliement : Secteur Circuit.<br>‚Ä¢ R√¥le : Passag√®re (Bapt√™me de piste).<br>‚Ä¢ Dress code : Baskets et fibres techniques.<br>‚Ä¢ Objectif : Survivre aux G." },
        { date: "2026-07-26", texte: "<b>PHASE 1 : VALID√âE.</b><br>Le Mans est d√©sormais derri√®re. Le syst√®me recalcule les priorit√©s. Repose-toi, les prochaines 48h vont demander des ressources que tu n'as pas encore mobilis√©es." },
        { date: "2026-07-27", texte: "<b>ALERTE : D√âTOURNEMENT DE MISSION</b><br>Le Mans n'√©tait qu'un test d'endurance. La v√©ritable cible est ailleurs.<br><br><b>PROTOCOLE DE D√âPART - 28 JUILLET :</b><br>1. Pr√©parer un paquetage pour 48 heures.<br>2. S√©lectionner une tenue de cat√©gorie 'Prestige' (Magnifique / Chic).<br>3. Chaussures : Confort de marche imp√©ratif.<br>4. <b>Extraction √† 06h45 pr√©cises.</b><br><br><i>Aucune communication sortante ne sera tol√©r√©e jusqu'au franchissement de la zone de s√©curit√©.</i>" },
        { date: "2026-07-28", texte: "<b>OBJECTIF FINAL : PARIS</b><br>Fin de la diversion. Changement de d√©cor.<br><br><b>Nalya, bienvenue dans la Ville Lumi√®re.</b><br>L'Op√©ration X.28 entre dans sa phase finale." }
    ];

    const DATE_DEPART_FINALE = "2026-07-28T06:45:00";

    let simDate = null;
    let hasNotified = false;
    let adminClicks = 0;
    let clickTimer;

    // Clic secret
    document.getElementById('secret-trigger').addEventListener('click', function() {
        adminClicks++;
        clearTimeout(clickTimer);
        clickTimer = setTimeout(() => { adminClicks = 0; }, 2000);
        if (adminClicks >= 5) {
            document.getElementById('admin-panel').style.display = 'block';
            adminClicks = 0;
        }
    });

    function init() {
        const list = document.getElementById('puzzles-list');
        if(!list) return;
        list.innerHTML = "";
        MES_ENIGMES.forEach((e, i) => {
            const d = new Date(e.date + "T00:00:00");
            list.innerHTML += `
                <div class="hint-card" id="card-${i}">
                    <div class="date-badge">
                        <span>${d.toLocaleString('fr-FR',{month:'short'})}</span>
                        <strong>${d.getDate()}</strong>
                    </div>
                    <div class="hint-content" id="content-${i}"></div>
                </div>`;
        });
        setTimeout(() => {
            document.querySelectorAll('.hint-card').forEach(c => c.classList.add('is-ready'));
        }, 100);
        updateUI();
    }

    function updateUI() {
        const now = simDate || new Date();
        const targetDeparture = new Date(DATE_DEPART_FINALE);
        let unlockedCount = 0;

        MES_ENIGMES.forEach((e, i) => {
            const dateCible = new Date(e.date + "T00:00:00");
            const cont = document.getElementById(`content-${i}`);
            if(!cont) return;

            if (now >= dateCible) {
                const isRevealed = localStorage.getItem('enigme_'+e.date) === 'true';
                if (isRevealed) unlockedCount++;

                if (!cont.querySelector('.hint-text')) {
                    cont.innerHTML = `<div class="hint-text ${isRevealed ? '' : 'is-blur'}" onclick="reveal('${e.date}', this)">${e.texte}</div>`;
                }
                
                if (!isRevealed && !hasNotified && (simDate || now.toDateString() === dateCible.toDateString())) {
                    forcePopup();
                }
            } else {
                const diff = dateCible - now;
                const d = Math.floor(diff / 86400000);
                const h = Math.floor((diff % 86400000) / 3600000);
                const m = Math.floor((diff % 3600000) / 60000);
                const s = Math.floor((diff % 60000) / 1000);
                cont.innerHTML = `
                    <span class="countdown-label">Se d√©verrouille dans :</span>
                    <div class="countdown-small">${d}j ${h}h ${m}m ${s}s</div>
                `;
            }
        });

        const diffDep = targetDeparture - now;
        const timerEl = document.getElementById('departure-timer');
        if (timerEl) {
            if (diffDep > 0) {
                const dJ = Math.floor(diffDep / 86400000);
                const dH = Math.floor((diffDep % 86400000) / 3600000);
                const dM = Math.floor((diffDep % 3600000) / 60000);
                const dS = Math.floor((diffDep % 60000) / 1000);
                timerEl.innerText = `D√©part dans ${dJ}j ${dH}h ${dM}m ${dS}s`;
            } else {
                timerEl.innerText = "L'aventure commence.";
            }
        }

        const progress = Math.round((unlockedCount / MES_ENIGMES.length) * 100);
        const bar = document.getElementById('status-bar');
        const per = document.getElementById('status-percent');
        if(bar) bar.style.width = progress + "%";
        if(per) per.innerText = progress + "%";
    }

    function reveal(id, el) {
        if (el.classList.contains('is-blur')) {
            el.classList.remove('is-blur');
            localStorage.setItem('enigme_'+id, 'true');
            document.getElementById('unlock-sound').play().catch(()=>{});
            setTimeout(updateUI, 500);
        }
    }

    function closePopup() { document.getElementById('mission-popup').style.display = 'none'; }
    function forcePopup() { document.getElementById('mission-popup').style.display = 'flex'; hasNotified = true; }
    
    function setTestDate() { 
        const v = document.getElementById('test-date').value;
        if(v) { 
            simDate = new Date(v + "T00:00:01"); 
            hasNotified = false;
            updateUI(); 
        }
    }

    init();
    setInterval(updateUI, 1000);
</script>
</body>
</html>
